<!DOCTYPE html>
<html lang='en'>
<head>
<meta charset='UTF-8'>
<title>Bunny Match Game</title>
<style>
  body { font-family: sans-serif; text-align: center; margin-top: 2rem; }
  #bunny { width: 150px; cursor: grab; }
  #drop-target {
    width: 230px;
    height: 230px;
    margin: 2rem auto;
    background-size: contain;
    background-repeat: no-repeat;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .heart {
    position: absolute;
    font-size: 24px;
    color: hotpink;
    animation: float 1s forwards;
    left: 50%%;
    top: 50%%;
  }
  @keyframes float {
    from { transform: translate(-50%%, -50%%) scale(1); opacity: 1; }
    to   { transform: translate(-50%%, -200%%) scale(2); opacity: 0; }
  }
</style>
</head>
<body>
<h1>Drag the bunny into the silhouette</h1>
<div>
  <button id="prev">Prev</button>
  <button id="next">Next</button>
</div>
<img id='bunny' draggable='true'>
<div id='drop-target'></div>
<script>
const pairs = [{"id": "001", "bunny": "assets/pairs/001/bunny.png", "silhouette": "assets/pairs/001/silhouette.png"}, {"id": "002", "bunny": "assets/pairs/002/bunny.png", "silhouette": "assets/pairs/002/silhouette.png"}];
let currentIndex = 0;
function loadPair() {
  const pair = pairs[currentIndex];
  const bunny = document.getElementById('bunny');
  bunny.src = pair.bunny;
  const dropTarget = document.getElementById('drop-target');
  dropTarget.style.backgroundImage = `url(${pair.silhouette})`;
  dropTarget.innerHTML = '';
}

document.getElementById('next').onclick = () => {
  currentIndex = (currentIndex + 1) %% pairs.length;
  loadPair();
};
document.getElementById('prev').onclick = () => {
  currentIndex = (currentIndex - 1 + pairs.length) %% pairs.length;
  loadPair();
};

const bunnyElem = document.getElementById('bunny');
bunnyElem.addEventListener('dragstart', (e) => {
  e.dataTransfer.setData('text/plain', 'bunny');
});
const dropTarget = document.getElementById('drop-target');
dropTarget.addEventListener('dragover', (e) => e.preventDefault());
dropTarget.addEventListener('drop', (e) => {
  e.preventDefault();
  const data = e.dataTransfer.getData('text/plain');
  if (data === 'bunny') {
    dropTarget.innerHTML = '';
    dropTarget.appendChild(bunnyElem.cloneNode(true));
    for (let i=0; i<5; i++) {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.textContent = '❤️';
      heart.style.left = (50 + (Math.random() - 0.5) * 60) + '%%';
      heart.style.animationDuration = (1 + Math.random()) + 's';
      dropTarget.appendChild(heart);
      setTimeout(() => heart.remove(), 1500);
    }
  }
});
window.onload = loadPair;
</script>
</body>
</html>
